<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #f8f9fa;
      padding: 20px;
    }

    .endpoint-card {
      margin-bottom: 20px;
      border-left: 5px solid #0d6efd;
    }

    pre {
      background: #e9ecef;
      padding: 10px;
      border-radius: 5px;
    }
  </style>
  <script>
    /**
      * æŒ‡å®šã—ãŸæ—¥æ•°å‰ã®æ—¥ä»˜ã‚’ YYYY/MM/DD ã§è¿”ã™
    **/
    function getPastDate(daysBefore) {
      const d = new Date();
      d.setDate(d.getDate() - daysBefore);

      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, '0');
      const d_ = String(d.getDate()).padStart(2, '0');

      return `${y}/${m}/${d_}`;
    }

    function updateLinks() {
      // 2æ—¥å‰ã®æ—¥ä»˜ã‚’å–å¾—
      const targetDate = getPastDate(2);

      google.script.run
        .withSuccessHandler((url) => {
          if (!url) return;

          const links = document.querySelectorAll('.api-link');
          links.forEach(link => {
            let query = link.getAttribute('data-query');

            // data-queryå†…ã®æ—¥ä»˜ï¼ˆ2026-02-01ç­‰ï¼‰ã‚’å‹•çš„ãªæ—¥ä»˜ã«ç½®æ›
            // ä»Šå›ã¯ã‚¹ãƒ©ãƒƒã‚·ãƒ¥åŒºåˆ‡ã‚Šï¼ˆYYYY/MM/DDï¼‰ã‚’å¸Œæœ›ã¨ã®ã“ã¨ãªã®ã§ãã®ã¾ã¾ä»£å…¥
            query = query.replace(/\d{4}-\d{2}-\d{2}/, targetDate);

            const fullUrl = url + query;
            link.href = fullUrl;
            link.innerText = fullUrl;
          });
        })
        .getScriptUrl();
    }

    window.onload = updateLinks;
  </script>
  </script>
  </script>
</head>

<body>
  <div class="container">
    <h1 class="mb-4">Jobcan Proxy API ğŸš€</h1>
    <p class="text-muted">Jobcan APIã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä¸­ç¶™ã™ã‚‹ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</p>

    <div class="card endpoint-card shadow-sm">
      <div class="card-body">
        <h5 class="card-title">1. å…¨ä»¶å–å¾— (Walk)</h5>
        <p class="card-text">æŒ‡å®šã—ãŸæ—¥ä»˜ä»¥é™ã®ç”³è«‹ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ä»¶å–å¾—ã—ã¾ã™ã€‚</p>
        <table class="table table-sm">
          <tr>
            <th>action</th>
            <td><code>walk</code></td>
          </tr>
          <tr>
            <th>date</th>
            <td><code>YYYY-MM-DD</code></td>
          </tr>
        </table>
        <h6>Example:</h6>
        <pre><a href="#" class="api-link" data-query="?action=walk&date=2026-02-01" target="_blank">Loading...</a></pre>
      </div>
    </div>

    <div class="card endpoint-card shadow-sm" style="border-left-color: #198754;">
      <div class="card-body">
        <h5 class="card-title">2. è©³ç´°å–å¾— (Detail)</h5>
        <p class="card-text">ç”³è«‹IDã‚’æŒ‡å®šã—ã¦ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºé …ç›®ã‚’å«ã‚€è©³ç´°ã‚’å–å¾—ã—ã¾ã™ã€‚</p>
        <table class="table table-sm">
          <tr>
            <th>action</th>
            <td><code>detail</code></td>
          </tr>
          <tr>
            <th>id</th>
            <td>Jobcanã®ç”³è«‹ID</td>
          </tr>
        </table>
        <h6>Example:</h6>
        <pre><a href="#" class="api-link" data-query="?action=detail&id=108229" target="_blank">Loading...</a></pre>
      </div>
    </div>
  </div>
</body>

</html>
